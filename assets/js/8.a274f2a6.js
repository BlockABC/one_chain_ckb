(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{333:function(t,a,s){"use strict";s.r(a);var r=s(19),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("hr"),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("由于参数众多，所有接口的参数都需要以 "),s("code",[t._v("{}")]),t._v(" 的形式传递。")]),t._v(" "),s("li",[t._v("[param] 表示参数是可选的。")]),t._v(" "),s("li",[t._v("CKB 目前的转账金额最少不能低于 6100000000 shannon 。")])])]),t._v(" "),s("p",[t._v("这个 package 是主要的接口的实现，推荐使用的导出模块如下：")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" helper "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./CKB'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./HDWallet'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Transaction'")]),t._v("\n")])])]),s("h2",{attrs:{id:"class-ckb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-ckb"}},[t._v("#")]),t._v(" Class CKB")]),t._v(" "),s("h3",{attrs:{id:"constructor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#constructor"}},[t._v("#")]),t._v(" constructor")]),t._v(" "),s("p",[t._v("创建 CKB 对象，下面将简称为 provider ，将用于后续创建交易等，是一切的的开始。")]),t._v(" "),s("h4",{attrs:{id:"param"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("rpcnode: "),s("code",[t._v("RPCNode")]),t._v(" ，通过 "),s("code",[t._v("RPCNode.constructor")]),t._v(" 创建。")]),t._v(" "),s("li",[t._v("[keypairs]: "),s("code",[t._v("IKeypair[]")]),t._v(" ，默认为 "),s("code",[t._v("[]")]),t._v(" 需要 SDK 使用者自己构造，详见 "),s("a",{attrs:{href:"https://github.com/BlockABC/one_chain_ckb/blob/master/packages/core/src/interface.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("interface.ts"),s("OutboundLink")],1),t._v("，如果不传可以创建未签名的交易，之后再在需要的时刻进行签名。")]),t._v(" "),s("li",[t._v("[logger]: "),s("code",[t._v("ILogger")]),t._v(" ，默认为 "),s("code",[t._v("null")]),t._v(" ，一个 "),s("code",[t._v("ILogger")]),t._v(" 实现，如果不传出错时会看不到任何日志。")])]),t._v(" "),s("h4",{attrs:{id:"return"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("object: "),s("code",[t._v("IUTXOProvider")]),t._v(" 详见 "),s("a",{attrs:{href:"https://github.com/BlockABC/one_chain_ckb/blob/master/packages/core/src/interface.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("interface.ts"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rpcnode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RPCNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" logger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsoleLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" provider "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CKB")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rpcnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  keypairs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" privateKey"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" privateKey"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"setkeypairs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setkeypairs"}},[t._v("#")]),t._v(" setKeypairs")]),t._v(" "),s("p",[t._v("修改 provider 内的公私钥对，可以用于切换不同公私钥对签名、延迟传入公私钥对的情况。")]),t._v(" "),s("h4",{attrs:{id:"param-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-2"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("keypairs: "),s("code",[t._v("IKeypair[]")]),t._v(" 需要 SDK 使用者自己构造，详见 "),s("a",{attrs:{href:"https://github.com/BlockABC/one_chain_ckb/blob/master/packages/core/src/interface.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("interface.ts"),s("OutboundLink")],1),t._v("，如果需要清空请传 "),s("code",[t._v("[]")]),t._v("。")])]),t._v(" "),s("h4",{attrs:{id:"return-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-2"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("void")]),t._v(" "),s("h4",{attrs:{id:"example-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-2"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" provider "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CKB")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nprovider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setKeypairs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  keypairs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" privateKey"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" privateKey"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"setrpcnode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setrpcnode"}},[t._v("#")]),t._v(" setRPCNode")]),t._v(" "),s("p",[t._v("修改 provider 内的 RPCNode 实例，可以用于切换不同链。")]),t._v(" "),s("h4",{attrs:{id:"param-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-3"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("rpcnode: "),s("code",[t._v("RPCNode")]),t._v(" ，通过 "),s("code",[t._v("RPCNode.constructor")]),t._v(" 创建。")])]),t._v(" "),s("h4",{attrs:{id:"return-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-3"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("void")]),t._v(" "),s("h4",{attrs:{id:"example-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-3"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" provider "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CKB")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rpcnode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RPCNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nprovider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRpcnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" rpcnode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"sign"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sign"}},[t._v("#")]),t._v(" sign")]),t._v(" "),s("p",[t._v("对交易进行签名。")]),t._v(" "),s("h4",{attrs:{id:"param-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-4"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("transaction: "),s("code",[t._v("RPC.RawTransaction")]),t._v(" ，CKB RPC 节点可接受的原始交易结构，请不要手工构造，使用 "),s("code",[t._v("buildTransaction")]),t._v(" 接口构造。")]),t._v(" "),s("li",[t._v("unspents: "),s("code",[t._v("IUTXOUnspent[]")]),t._v(" ，详见 "),s("a",{attrs:{href:"https://github.com/BlockABC/one_chain_ckb/blob/master/packages/core/src/interface.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("interface.ts"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("h4",{attrs:{id:"return-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-4"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("object: "),s("code",[t._v("RPC.RawTransaction")]),t._v(" ，返回值 "),s("code",[t._v("JSON.stringify")]),t._v(" 后就可以直接通过 CKB RPC 节点推送了。")]),t._v(" "),s("h4",{attrs:{id:"example-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-4"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rawTx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sign")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  unspents"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      txId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      vout"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Decimal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      lock"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      lockHash"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"buildtransaction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#buildtransaction"}},[t._v("#")]),t._v(" buildTransaction")]),t._v(" "),s("p",[t._v("构造交易。")]),t._v(" "),s("h4",{attrs:{id:"param-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-5"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("froms: "),s("code",[t._v("IUTXOFromToParam[]")]),t._v(" ，详见 "),s("a",{attrs:{href:"https://github.com/BlockABC/one_chain_ckb/blob/master/packages/core/src/interface.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("interface.ts"),s("OutboundLink")],1),t._v("，转出地址列表，。")]),t._v(" "),s("li",[t._v("tos: "),s("code",[t._v("IUTXOFromToParam[]")]),t._v(" ，详见 "),s("a",{attrs:{href:"https://github.com/BlockABC/one_chain_ckb/blob/master/packages/core/src/interface.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("interface.ts"),s("OutboundLink")],1),t._v("，转入地址和金额列表，。")]),t._v(" "),s("li",[t._v("changeAddress: "),s("code",[t._v("string")]),t._v(" ，找零地址列表， "),s("code",[t._v("tos")]),t._v(" 和 "),s("code",[t._v("froms")]),t._v(" 之间的差额会被转入到这个地址。")])]),t._v(" "),s("h4",{attrs:{id:"return-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-5"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("object: "),s("code",[t._v("Transaction")]),t._v(" ，也就是 "),s("code",[t._v("Transaction")]),t._v(" 类的实例。")]),t._v(" "),s("h4",{attrs:{id:"example-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-5"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  froms"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  tos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'C'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6100000000'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'D'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6100000000'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  changeAddress"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"buildautofixtransaction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#buildautofixtransaction"}},[t._v("#")]),t._v(" buildAutoFixTransaction")]),t._v(" "),s("p",[t._v("构造交易，和 buildTransaction 稍有不同，如果转出金额超过了余额，会被自动限制在余额之内，需要做到 “转出全部” 的样的效果时就需要这个接口。")]),t._v(" "),s("h4",{attrs:{id:"param-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-6"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("froms: "),s("code",[t._v("IUTXOFromToParam[]")]),t._v(" ，详见 "),s("a",{attrs:{href:"https://github.com/BlockABC/one_chain_ckb/blob/master/packages/core/src/interface.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("interface.ts"),s("OutboundLink")],1),t._v("，转出地址列表，。")]),t._v(" "),s("li",[t._v("tos: "),s("code",[t._v("IUTXOFromToParam[]")]),t._v(" ，详见 "),s("a",{attrs:{href:"https://github.com/BlockABC/one_chain_ckb/blob/master/packages/core/src/interface.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("interface.ts"),s("OutboundLink")],1),t._v("，转入地址和金额列表，。")]),t._v(" "),s("li",[t._v("changeAddress: "),s("code",[t._v("string")]),t._v(" ，找零地址列表， "),s("code",[t._v("tos")]),t._v(" 和 "),s("code",[t._v("froms")]),t._v(" 之间的差额会被转入到这个地址。")])]),t._v(" "),s("h4",{attrs:{id:"return-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-6"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("object: "),s("code",[t._v("Transaction")]),t._v(" ，也就是 "),s("code",[t._v("Transaction")]),t._v(" 类的实例。")]),t._v(" "),s("h4",{attrs:{id:"example-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-6"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildAutoFixTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  froms"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  tos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'C'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6100000000'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'D'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6100000000'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  changeAddress"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"pushtransaction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pushtransaction"}},[t._v("#")]),t._v(" pushTransaction")]),t._v(" "),s("p",[t._v("推送交易。")]),t._v(" "),s("h4",{attrs:{id:"param-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-7"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("transaction: "),s("code",[t._v("Transaction | string")]),t._v(" ，可以是 buildTransaction 接口构造的交易对象，也可以是 CKB RPC 节点接受的原始交易。")])]),t._v(" "),s("h4",{attrs:{id:"return-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-7"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("txId: "),s("code",[t._v("string")]),t._v(" ，被推送交易的 ID。")]),t._v(" "),s("h4",{attrs:{id:"example-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-7"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildAutoFixTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" txId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" transaction"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" tx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"hdwalletfrommnemonic"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hdwalletfrommnemonic"}},[t._v("#")]),t._v(" hdwalletFromMnemonic")]),t._v(" "),s("p",[t._v("从助记词推导 HD 钱包结构。")]),t._v(" "),s("h4",{attrs:{id:"param-8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-8"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("mnemonic: "),s("code",[t._v("string")]),t._v(" ，助记词。")]),t._v(" "),s("li",[t._v("path: "),s("code",[t._v("string")]),t._v(" ，推导路径，遵循 "),s("a",{attrs:{href:"https://github.com/satoshilabs/slips/blob/master/slip-0044.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SLIP-0044"),s("OutboundLink")],1),t._v(" 的路径是 "),s("code",[t._v("m/44'/309'/0'")]),t._v("。")]),t._v(" "),s("li",[t._v("needSync: "),s("code",[t._v("boolean")]),t._v(" ，默认为 "),s("code",[t._v("true")]),t._v("，是否通过网络同步。")])]),t._v(" "),s("h4",{attrs:{id:"return-8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-8"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("object: "),s("code",[t._v("IUTXOHDWallet")]),t._v(" ，也就是 "),s("code",[t._v("HDWallet")]),t._v(" 类的实例。")]),t._v(" "),s("h4",{attrs:{id:"example-8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-8"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hdwallet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hdwalletFromMnemonic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mnemonic"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("m/44'/309'/0'")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"hdwalletfromjson"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hdwalletfromjson"}},[t._v("#")]),t._v(" hdwalletFromJSON")]),t._v(" "),s("p",[t._v("从 "),s("code",[t._v("HDWallet.toJSON")]),t._v(" 返回的 JSON 数据中回复 "),s("code",[t._v("HDWallet")]),t._v(" 实例，通过缓存 JSON 数据可以避免需要每次重新同步 HD 钱包。")]),t._v(" "),s("h4",{attrs:{id:"param-9"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-9"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("json: "),s("code",[t._v("any")]),t._v(" ， "),s("code",[t._v("HDWallet.toJSON")]),t._v(" 的返回值。")])]),t._v(" "),s("h4",{attrs:{id:"return-9"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-9"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("object: "),s("code",[t._v("IUTXOHDWallet")]),t._v(" ，也就是 "),s("code",[t._v("HDWallet")]),t._v(" 类的实例。")]),t._v(" "),s("h4",{attrs:{id:"example-9"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-9"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hdwallet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hdwalletFromMnemonic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" json "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"class-transaction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-transaction"}},[t._v("#")]),t._v(" Class Transaction")]),t._v(" "),s("h3",{attrs:{id:"properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties"}},[t._v("#")]),t._v(" Properties")]),t._v(" "),s("ul",[s("li",[t._v("value: string ，总转出金额。")]),t._v(" "),s("li",[t._v("change: string ，总找零金额")]),t._v(" "),s("li",[t._v("fee: string ，总矿工费，包含浪费的部分。")]),t._v(" "),s("li",[t._v("waste: string ，总浪费金额，也就是无法找零的部分，当找零金额低于 6100000000 shannon 时就会产生。")]),t._v(" "),s("li",[t._v("size: string ，当前交易体积。")]),t._v(" "),s("li",[t._v("unspents: IUTXOUnspent ，转出地址所有可用的未花费 Cell 。")]),t._v(" "),s("li",[t._v("inputs: IUTXOInput ，交易的输入。")]),t._v(" "),s("li",[t._v("outputs: IUTXOOutput ，交易的输出。")]),t._v(" "),s("li",[t._v("rawTransaction: string ，CKB RPC 节点接受的原始交易数据。")])]),t._v(" "),s("h3",{attrs:{id:"edit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#edit"}},[t._v("#")]),t._v(" edit")]),t._v(" "),s("p",[t._v("编辑交易。")]),t._v(" "),s("h4",{attrs:{id:"param-10"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-10"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("[fee]: "),s("code",[t._v("Decimal.Value")]),t._v(" ，修改矿工费，设置这个参数后 "),s("code",[t._v("feeRate")]),t._v(" 就不再生效。")]),t._v(" "),s("li",[t._v("[feeRate]: "),s("code",[t._v("Decimal.Value")]),t._v(" 修改矿工费费率，以 "),s("strong",[t._v("shannon/Byte")]),t._v(" 计算，如果不知道具体应付多少矿工费就可以使用这个费率值。")]),t._v(" "),s("li",[t._v("[tos]: "),s("code",[t._v("IUTXOFromToParam[]")]),t._v(" 修改收款地址和金额。")]),t._v(" "),s("li",[t._v("[keypairs]: "),s("code",[t._v("IKeypair[]")]),t._v(" 修改签名用的公私钥。")]),t._v(" "),s("li",[t._v("[changeAddress]: "),s("code",[t._v("string")]),t._v(" 修改找零地址。")])]),t._v(" "),s("h4",{attrs:{id:"return-10"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-10"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("void")]),t._v(" "),s("h4",{attrs:{id:"example-10"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-10"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("edit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" feeRate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"tojson"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tojson"}},[t._v("#")]),t._v(" toJSON")]),t._v(" "),s("p",[t._v("转为 CKB RPC 节点可直接推送的 JSON 数据。")]),t._v(" "),s("h4",{attrs:{id:"param-11"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-11"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("p",[t._v("void")]),t._v(" "),s("h4",{attrs:{id:"return-11"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-11"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("object: "),s("code",[t._v("RPC.RawTransaction")])]),t._v(" "),s("h4",{attrs:{id:"example-11"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-11"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rawTx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"class-hdwallet"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-hdwallet"}},[t._v("#")]),t._v(" Class HDWallet")]),t._v(" "),s("h3",{attrs:{id:"properties-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties-2"}},[t._v("#")]),t._v(" Properties")]),t._v(" "),s("ul",[s("li",[t._v("static ADDRESS_ALL: string ，地址类型")]),t._v(" "),s("li",[t._v("static ADDRESS_CHANGE: string ，地址类型")]),t._v(" "),s("li",[t._v("static ADDRESS_RECEIVING: string ，地址类型")]),t._v(" "),s("li",[t._v("mnemonic: string ，助记词。")]),t._v(" "),s("li",[t._v("path: string ，推导的根路径。")]),t._v(" "),s("li",[t._v("receiving: IAddress[] ，外链地址。")]),t._v(" "),s("li",[t._v("change: IAddress[] ，内链地址。")])]),t._v(" "),s("h3",{attrs:{id:"derive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#derive"}},[t._v("#")]),t._v(" derive")]),t._v(" "),s("p",[t._v("推导 HD 钱包结构，当从 JSON 数据中回复 HD 钱包或长时间未使用后，如果希望得出 HD 钱包最新的状态就需要调用这个接口进行推导。")]),t._v(" "),s("h4",{attrs:{id:"param-12"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-12"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("[syncfromStart]: "),s("code",[t._v("boolean")]),t._v(" ，默认为 "),s("code",[t._v("false")]),t._v(" ，是否从头开始推导整个 HD 钱包的结构。")])]),t._v(" "),s("h4",{attrs:{id:"return-12"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-12"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("void")]),t._v(" "),s("h4",{attrs:{id:"example-12"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-12"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hdwallet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hdwalletFromMnemonic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" hdwallet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("derive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"getkeypairs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getkeypairs"}},[t._v("#")]),t._v(" getKeypairs")]),t._v(" "),s("p",[t._v("获得 HD 钱包中的公私钥。")]),t._v(" "),s("h4",{attrs:{id:"param-13"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-13"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("ul",[s("li",[t._v("[type]: string ，需要获取的地址类型，默认是 "),s("code",[t._v("HDWallet.ADDRESS_ALL")])])]),t._v(" "),s("h4",{attrs:{id:"return-13"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-13"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("array: "),s("code",[t._v("IKeypair[]")])]),t._v(" "),s("h4",{attrs:{id:"example-13"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-13"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hdwallet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hdwalletFromMnemonic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" keypairs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hdwallet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getKeypairs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" HDWallet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ADDRESS_RECEIVING")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"tojson-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tojson-2"}},[t._v("#")]),t._v(" toJSON")]),t._v(" "),s("p",[t._v("将 HD 钱包转为可以缓存的 JSON 数据结构。")]),t._v(" "),s("h4",{attrs:{id:"param-14"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#param-14"}},[t._v("#")]),t._v(" PARAM")]),t._v(" "),s("p",[t._v("void")]),t._v(" "),s("h4",{attrs:{id:"return-14"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-14"}},[t._v("#")]),t._v(" RETURN")]),t._v(" "),s("p",[t._v("object: "),s("code",[t._v("any")])]),t._v(" "),s("h4",{attrs:{id:"example-14"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-14"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hdwallet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hdwalletFromMnemonic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hdwallet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);